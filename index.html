<!DOCTYPE html>
<html lang="hi" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- SEO Meta Tags -->
    <title>AI स्मार्ट अटेंडेंस सिस्टम - पंचायती राज विभाग, बिहार सरकार | शेखपुरा जिला</title>
    <meta name="description" content="बिहार सरकार के पंचायती राज विभाग के लिए AI-आधारित स्मार्ट अटेंडेंस सिस्टम। कर्मचारियों की उपस्थिति रिकॉर्ड करने के लिए आधुनिक तकनीक।">
    <meta name="keywords" content="पंचायती राज, बिहार सरकार, अटेंडेंस सिस्टम, AI अटेंडेंस, स्मार्ट अटेंडेंस, शेखपुरा जिला">
    <meta name="author" content="पंचायती राज विभाग, बिहार सरकार">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#003D7A">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="AI स्मार्ट अटेंडेंस सिस्टम - पंचायती राज विभाग, बिहार सरकार">
    <meta property="og:description" content="बिहार सरकार के पंचायती राज विभाग के लिए AI-आधारित स्मार्ट अटेंडेंस सिस्टम">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="hi_IN">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com; img-src 'self' data: https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Font Awesome (minified) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+Devanagari:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon (optimized) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMyIDZDMTggNiA2IDE4IDYgMzJjMCAxNCAxMiAyNiAyNiAyNiAxNCAwIDI2LTEyIDI2LTI2QzU4IDE4IDQ2IDYgMzIgNloiIGZpbGw9IiMwMDJBQ0YiLz4KPHBhdGggZD0iTTQwLjUgMjNIMjMuNUMxOS4zNTc5IDIzIDE2IDI2LjM1NzkgMTYgMzAuNVY0MkMxNiA0NC4yMDkxIDE3Ljc5MDkgNDYgMjAgNDZINDRDNDYuMjA5MSA0NiA0OCA0NC4yMDkxIDQ4IDQyVjMwLjVDNDggMjYuMzU3OSA0NC42NDIxIDIzIDQwLjUgMjNaTTIzLjUgMjhINDMuNUM0NC4zMjg0IDI4IDQ1IDI4LjY3MTYgNDUgMjkuNVYzMkM0NSAzMy4xMDQ2IDQ0LjEwNDYgMzQgNDMgMzRIMjFDMTkuODk1NCAzNCAxOSAzMy4xMDQ2IDE5IDMyVjI5LjVDMTkgMjguNjcxNiAxOS42NzE2IDI4IDIwLjUgMjhIMjMuNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02MCAwQzI2Ljg2MjkgMCAwIDI2Ljg2MjkgMCA2MGMwIDMzLjEzNzEgMjYuODYyOSA2MCA2MCA2MCAzMy4xMzcxIDAgNjAtMjYuODYyOSA2MC02MEMxMjAgMjYuODYyOSA5My4xMzcxIDAgNjAgMFoiIGZpbGw9IiMwMDJBQ0YiLz4KPHBhdGggZD0iTTc1IDM0LjVINUw0MCA2NSA3NSAzNC41WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==">
    
    <!-- Inline Critical CSS (First Paint) -->
    <style>
        /* ========== CRITICAL CSS (Above the fold) ========== */
        :root {
            --primary-dark: #002B5C;
            --primary: #003D7A;
            --primary-light: #2C5E9E;
            --secondary: #1B5E20;
            --secondary-light: #2E8B57;
            --accent: #0D47A1;
            --accent-light: #1565C0;
            --warning: #E65100;
            --danger: #C62828;
            --success: #1B5E20;
            --dark: #000000;
            --light: #FFFFFF;
            --gray-dark: #424242;
            --gray: #757575;
            --gray-light: #BDBDBD;
            --gray-lighter: #F5F5F5;
            --card-bg: #FFFFFF;
            --sidebar-bg: #003366;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
            --radius: 12px;
            --radius-sm: 6px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: 'Inter', 'Noto Sans Devanagari', sans-serif;
            background-color: var(--gray-lighter);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Loading Screen (Critical) */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Login Page (Critical) */
        #loginPage {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            padding: 20px;
        }
        
        .login-container {
            background: white;
            border-radius: var(--radius);
            padding: 3rem;
            width: 100%;
            max-width: 450px;
            box-shadow: var(--shadow-lg);
        }
        
        /* Accessibility */
        .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }
        
        *:focus {
            outline: 3px solid var(--accent);
            outline-offset: 2px;
        }
        
        /* Security Warning */
        .security-warning {
            background: #FFF3CD;
            border: 1px solid #FFECB5;
            color: #856404;
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-top: 1rem;
            font-size: 0.875rem;
            text-align: center;
        }
        
        .security-warning strong {
            display: block;
            margin-bottom: 0.5rem;
        }
    </style>
    
    <!-- Deferred Non-Critical CSS -->
    <style id="deferred-styles">
        /* ========== NON-CRITICAL CSS ========== */
        /* Login Page Details */
        .login-logo {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .login-logo i {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .login-form .form-group {
            margin-bottom: 1.5rem;
        }
        
        .login-help {
            margin-top: 2rem;
            padding: 1rem;
            background: var(--gray-lighter);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }
        
        /* Main App Container */
        .app-container {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        /* Header */
        .app-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            padding: 1rem 1.5rem;
            margin: 1rem 1rem 0;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--secondary);
        }
        
        .brand-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .gov-logo {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
            border: 2px solid white;
        }
        
        .gov-logo i {
            color: var(--primary);
            font-size: 2rem;
        }
        
        .brand-text {
            color: white;
        }
        
        .brand-text h1 {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
            font-weight: 700;
        }
        
        .brand-text p {
            font-size: 0.875rem;
            opacity: 0.95;
        }
        
        /* Dashboard Layout */
        .dashboard {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 1.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--sidebar-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            position: sticky;
            top: 1rem;
            height: fit-content;
            color: white;
            box-shadow: var(--shadow);
        }
        
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .user-info h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        
        .user-role {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        .sidebar-nav {
            list-style: none;
            margin-bottom: 2rem;
        }
        
        .nav-item {
            margin-bottom: 0.5rem;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            font-weight: 500;
            border: 1px solid transparent;
        }
        
        .nav-link:hover,
        .nav-link:focus {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .nav-link.active {
            background: rgba(38, 115, 82, 0.8);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .sidebar-stats {
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius-sm);
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        /* Main Content */
        main {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--gray-light);
        }
        
        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-light);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.25rem;
            color: var(--primary);
        }
        
        /* Dashboard Specific */
        .welcome-banner {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            border: none;
        }
        
        .welcome-banner h2 {
            color: white;
            margin-bottom: 0.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid var(--gray-light);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            display: block;
            margin-bottom: 0.25rem;
        }
        
        .quick-actions {
            margin-top: 1.5rem;
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        
        .action-card {
            background: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            width: 100%;
        }
        
        .action-card:hover {
            background: var(--gray-lighter);
            transform: translateY(-2px);
        }
        
        .action-card i {
            font-size: 2rem;
            color: var(--primary);
        }
        
        /* Attendance Section */
        .attendance-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        .camera-box {
            background: var(--gray-lighter);
            border-radius: var(--radius);
            overflow: hidden;
            height: 300px;
            position: relative;
            border: 2px solid var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .camera-placeholder {
            text-align: center;
            color: var(--gray);
        }
        
        .camera-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        #videoElement {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .camera-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .location-info-box {
            background: var(--gray-lighter);
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-top: 1rem;
        }
        
        .location-info-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .location-info-row:last-child {
            border-bottom: none;
        }
        
        .form-actions {
            margin-top: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }
        
        .form-control:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.1);
        }
        
        .form-control.is-invalid {
            border-color: var(--danger);
        }
        
        .invalid-feedback {
            display: none;
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .form-control.is-invalid + .invalid-feedback {
            display: block;
        }
        
        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: var(--transition);
            text-decoration: none;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background-color: var(--accent);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background-color: var(--primary);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-block {
            width: 100%;
        }
        
        /* Tables */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 1rem;
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }
        
        .table th {
            padding: 1rem;
            text-align: left;
            background: var(--gray-lighter);
            color: var(--primary);
            font-weight: 600;
            border-bottom: 2px solid var(--gray-light);
        }
        
        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-light);
            color: var(--gray-dark);
        }
        
        .table tr:hover {
            background-color: rgba(0, 61, 122, 0.02);
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .status-present {
            background-color: rgba(27, 94, 32, 0.1);
            color: var(--success);
        }
        
        .status-absent {
            background-color: rgba(198, 40, 40, 0.1);
            color: var(--danger);
        }
        
        /* Notifications */
        .notification-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            max-width: 400px;
            width: 90%;
        }
        
        .notification {
            background: white;
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 0.75rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            border-left: 4px solid var(--accent);
            animation: slideIn 0.3s ease;
        }
        
        .notification-success {
            border-left-color: var(--success);
        }
        
        .notification-error {
            border-left-color: var(--danger);
        }
        
        .notification-warning {
            border-left-color: var(--warning);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--gray-light);
        }
        
        /* Footer */
        .app-footer {
            background: var(--primary);
            color: white;
            padding: 2rem 1.5rem;
            margin: 0 1rem 1rem;
            border-radius: var(--radius);
            text-align: center;
        }
        
        .footer-content p {
            margin-bottom: 0.5rem;
        }
        
        .developer {
            color: #FFD700;
            font-weight: 600;
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
            padding: 1rem;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -300px;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                z-index: 999;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .attendance-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .app-header {
                padding: 0.75rem 1rem;
                margin: 0.5rem 0.5rem 0;
            }
            
            .brand-text h1 {
                font-size: 1.125rem;
            }
            
            .dashboard {
                padding: 0.5rem;
            }
            
            .card {
                padding: 1rem;
            }
            
            .btn {
                padding: 0.625rem 1.25rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .actions-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .camera-controls {
                flex-direction: column;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .actions-grid {
                grid-template-columns: 1fr;
            }
            
            .login-container {
                padding: 2rem 1rem;
            }
            
            .app-footer {
                padding: 1.5rem 1rem;
            }
            
            .modal-content {
                padding: 1rem;
            }
        }
        
        /* Accessibility Enhancements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            .card {
                border: 2px solid var(--dark);
            }
            
            .btn {
                border: 2px solid currentColor;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" role="status" aria-label="सिस्टम लोड हो रहा है">
        <div class="loader" aria-hidden="true"></div>
        <div class="loader-text">पंचायती राज विभाग, बिहार सरकार</div>
        <div class="loader-subtext">AI स्मार्ट अटेंडेंस सिस्टम शुरू हो रहा है...</div>
    </div>
    
    <!-- Login Page -->
    <div id="loginPage">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-landmark" aria-hidden="true"></i>
                <h1>पंचायती राज विभाग, बिहार</h1>
                <h2>AI स्मार्ट अटेंडेंस सिस्टम</h2>
            </div>
            
            <form id="loginForm" class="login-form" novalidate>
                <div class="form-group">
                    <label for="username" class="form-label">
                        <i class="fas fa-user" aria-hidden="true"></i> यूजर आईडी
                    </label>
                    <input type="text" 
                           id="username" 
                           class="form-control" 
                           required
                           aria-required="true"
                           placeholder="अपना यूजर आईडी डालें"
                           autocomplete="username"
                           autocorrect="off"
                           autocapitalize="none"
                           spellcheck="false">
                    <div class="invalid-feedback">कृपया यूजर आईडी डालें</div>
                </div>
                
                <div class="form-group">
                    <label for="password" class="form-label">
                        <i class="fas fa-lock" aria-hidden="true"></i> पासवर्ड
                    </label>
                    <input type="password" 
                           id="password" 
                           class="form-control" 
                           required
                           aria-required="true"
                           placeholder="अपना पासवर्ड डालें"
                           autocomplete="current-password"
                           minlength="4">
                    <div class="invalid-feedback">पासवर्ड कम से कम 4 अक्षर का होना चाहिए</div>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt" aria-hidden="true"></i> लॉगिन करें
                    </button>
                </div>
                
                <div class="login-help">
                    <p><strong>डेमो एक्सेस:</strong></p>
                    <p>यूजर आईडी: <code>panchayat_admin</code></p>
                    <p>पासवर्ड: <code>demo@2024</code></p>
                </div>
                
                <div class="security-warning" role="alert">
                    <strong>⚠️ सुरक्षा सूचना:</strong>
                    <p>यह डेमो संस्करण है। वास्तविक उपयोग के लिए कृपया:</p>
                    <ul style="text-align: left; margin-top: 0.5rem;">
                        <li>डिफ़ॉल्ट पासवर्ड बदलें</li>
                        <li>HTSSL का उपयोग करें</li>
                        <li>सर्वर-साइड वैलिडेशन जोड़ें</li>
                    </ul>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" tabindex="-1"></div>
    
    <!-- Main App Container -->
    <div class="app-container" id="mainApp">
        <!-- Header -->
        <header class="app-header" role="banner">
            <div class="brand-section">
                <button class="mobile-menu-toggle" 
                        id="mobileMenuToggle" 
                        aria-label="मेनू खोलें/बंद करें"
                        aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="logo-container">
                    <div class="gov-logo" aria-hidden="true">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <div class="brand-text">
                        <h1>पंचायती राज विभाग, बिहार सरकार</h1>
                        <p>AI स्मार्ट अटेंडेंस सिस्टम</p>
                    </div>
                </div>
            </div>
            
            <div>
                <button class="btn btn-primary" id="helpBtn" aria-label="मदद">
                    <i class="fas fa-question-circle"></i> मदद
                </button>
                <button class="btn btn-danger" id="logoutBtn" aria-label="लॉगआउट">
                    <i class="fas fa-sign-out-alt"></i> लॉगआउट
                </button>
            </div>
        </header>
        
        <!-- Dashboard -->
        <div class="dashboard">
            <!-- Sidebar Navigation -->
            <nav class="sidebar" id="sidebar" role="navigation" aria-label="मुख्य नेविगेशन">
                <div class="user-profile" aria-labelledby="userName">
                    <div class="user-avatar" aria-hidden="true">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="user-info">
                        <h3 id="userName">शेखपुरा जिला</h3>
                        <p class="user-role" id="userRole">पंचायती राज अधिकारी</p>
                    </div>
                </div>
                
                <ul class="sidebar-nav" id="mainNav">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-section="dashboard" aria-current="page">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>डैशबोर्ड</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#attendance" class="nav-link" data-section="attendance">
                            <i class="fas fa-camera"></i>
                            <span>अटेंडेंस दर्ज करें</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#records" class="nav-link" data-section="records">
                            <i class="fas fa-history"></i>
                            <span>अटेंडेंस रिकॉर्ड</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#employees" class="nav-link" data-section="employees">
                            <i class="fas fa-users"></i>
                            <span>कर्मचारी प्रबंधन</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#reports" class="nav-link" data-section="reports">
                            <i class="fas fa-file-alt"></i>
                            <span>रिपोर्ट्स</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            <span>सेटिंग्स</span>
                        </a>
                    </li>
                </ul>
                
                <div class="sidebar-stats">
                    <div class="stat-item">
                        <span class="stat-label">आज की अटेंडेंस</span>
                        <span class="stat-value" id="sidebarToday">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">कुल कर्मचारी</span>
                        <span class="stat-value" id="sidebarTotalEmployees">14</span>
                    </div>
                </div>
            </nav>
            
            <!-- Main Content -->
            <main id="mainContent" role="main">
                <!-- Dashboard Section -->
                <section class="content-section active" id="dashboardSection" aria-labelledby="dashboardTitle">
                    <div class="welcome-banner card">
                        <h2 id="dashboardTitle">नमस्ते, पंचायती राज अधिकारी</h2>
                        <p>बिहार सरकार के पंचायती राज विभाग के कर्मचारियों की अटेंडेंस दर्ज करने के लिए AI सिस्टम में आपका स्वागत है।</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--accent);">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-value" id="todayPresent">0</div>
                            <div class="stat-label">आज उपस्थित</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--warning);">
                                <i class="fas fa-user-times"></i>
                            </div>
                            <div class="stat-value" id="todayAbsent">14</div>
                            <div class="stat-label">आज अनुपस्थित</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--success);">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="totalEmployees">14</div>
                            <div class="stat-label">कुल कर्मचारी</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--primary);">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-value" id="avgTime">N/A</div>
                            <div class="stat-label">औसत समय</div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>त्वरित कार्रवाई</h3>
                        <div class="actions-grid">
                            <button class="action-card" id="quickAttendance">
                                <i class="fas fa-camera"></i>
                                <span>अटेंडेंस दर्ज करें</span>
                            </button>
                            
                            <button class="action-card" id="quickTodayRecords">
                                <i class="fas fa-calendar-day"></i>
                                <span>आज का लॉग देखें</span>
                            </button>
                            
                            <button class="action-card" id="quickExport">
                                <i class="fas fa-download"></i>
                                <span>डाटा डाउनलोड करें</span>
                            </button>
                            
                            <button class="action-card" id="quickReport">
                                <i class="fas fa-file-export"></i>
                                <span>रिपोर्ट बनाएं</span>
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Attendance Section -->
                <section class="content-section" id="attendanceSection" aria-labelledby="attendanceTitle">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-camera"></i>
                                नई अटेंडेंस दर्ज करें
                            </h3>
                        </div>
                        
                        <div class="attendance-container">
                            <!-- Form Section -->
                            <div>
                                <form id="attendanceForm" novalidate>
                                    <div class="form-group">
                                        <label for="employeeSelect" class="form-label">कर्मचारी का नाम</label>
                                        <select class="form-control" id="employeeSelect" required>
                                            <option value="">कृपया कर्मचारी चुनें</option>
                                            <!-- Options loaded dynamically -->
                                        </select>
                                        <div class="invalid-feedback">कृपया कर्मचारी का चयन करें</div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="departmentSelect" class="form-label">विभाग</label>
                                        <select class="form-control" id="departmentSelect" required>
                                            <option value="">कृपया विभाग चुनें</option>
                                            <option value="पंचायती राज विभाग">पंचायती राज विभाग</option>
                                        </select>
                                        <div class="invalid-feedback">कृपया विभाग का चयन करें</div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="designationInput" class="form-label">पदनाम</label>
                                        <input type="text" class="form-control" id="designationInput" placeholder="पदनाम डालें" readonly>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="commentInput" class="form-label">टिप्पणी (वैकल्पिक)</label>
                                        <textarea class="form-control" id="commentInput" rows="3" placeholder="कोई टिप्पणी डालें" maxlength="500"></textarea>
                                        <small class="text-muted" id="charCount">0/500</small>
                                    </div>
                                    
                                    <!-- Location Information Display -->
                                    <div class="location-info-box">
                                        <div class="location-info-row">
                                            <span class="location-label">स्थान निर्देशांक:</span>
                                            <span class="location-value" id="locationCoords">प्राप्त किया जा रहा है...</span>
                                        </div>
                                        <div class="location-info-row">
                                            <span class="location-label">IP पता:</span>
                                            <span class="location-value" id="ipAddress">प्राप्त किया जा रहा है...</span>
                                        </div>
                                        <div class="location-info-row">
                                            <span class="location-label">फोटो समय:</span>
                                            <span class="location-value" id="photoTime">अभी तक नहीं ली गई</span>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Camera Section -->
                            <div>
                                <div class="camera-box">
                                    <div class="camera-placeholder" id="cameraPlaceholder">
                                        <i class="fas fa-camera"></i>
                                        <p>कैमरा यहाँ दिखेगा</p>
                                        <button class="btn btn-primary mt-2" id="startCameraBtn">
                                            <i class="fas fa-video"></i> कैमरा शुरू करें
                                        </button>
                                    </div>
                                    <video id="videoElement" autoplay playsinline style="display: none;"></video>
                                </div>
                                
                                <div class="camera-controls">
                                    <button class="btn btn-success btn-block" id="captureBtn" disabled>
                                        <i class="fas fa-camera-retro"></i> फोटो लें
                                    </button>
                                    <button class="btn btn-block" id="locationBtn">
                                        <i class="fas fa-map-marker-alt"></i> स्थान प्राप्त करें
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-success btn-block" id="submitBtn" disabled>
                                <i class="fas fa-check-circle"></i> अटेंडेंस दर्ज करें
                            </button>
                            <button class="btn btn-block" id="cancelBtn">
                                <i class="fas fa-times"></i> रद्द करें
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Records Section -->
                <section class="content-section" id="recordsSection" aria-labelledby="recordsTitle">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-history"></i>
                                अटेंडेंस रिकॉर्ड
                            </h3>
                            <div class="filter-controls" style="display: flex; gap: 0.5rem;">
                                <input type="date" class="form-control" id="recordDate">
                                <button class="btn btn-primary" id="filterBtn">
                                    <i class="fas fa-filter"></i> फिल्टर
                                </button>
                                <button class="btn" id="resetFilterBtn">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table" aria-describedby="recordsDescription">
                                <caption id="recordsDescription" class="visually-hidden">कर्मचारी अटेंडेंस रिकॉर्ड की सूची</caption>
                                <thead>
                                    <tr>
                                        <th scope="col">क्रम</th>
                                        <th scope="col">कर्मचारी</th>
                                        <th scope="col">विभाग</th>
                                        <th scope="col">समय</th>
                                        <th scope="col">स्थिति</th>
                                        <th scope="col">कार्रवाई</th>
                                    </tr>
                                </thead>
                                <tbody id="recordsTable">
                                    <!-- Records will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="emptyRecords" class="empty-state" style="display: none;">
                            <i class="fas fa-clipboard"></i>
                            <p>कोई रिकॉर्ड नहीं मिला</p>
                        </div>
                        
                        <div class="table-actions" style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn btn-primary" id="exportRecordsBtn">
                                <i class="fas fa-file-export"></i> CSV एक्सपोर्ट करें
                            </button>
                            <button class="btn" id="printRecordsBtn">
                                <i class="fas fa-print"></i> प्रिंट करें
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Employees Section -->
                <section class="content-section" id="employeesSection" aria-labelledby="employeesTitle">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-users"></i>
                                कर्मचारी प्रबंधन
                            </h3>
                            <button class="btn btn-primary" id="addEmployeeBtn">
                                <i class="fas fa-plus"></i> नया कर्मचारी
                            </button>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table" aria-describedby="employeesDescription">
                                <caption id="employeesDescription" class="visually-hidden">कर्मचारियों की सूची</caption>
                                <thead>
                                    <tr>
                                        <th scope="col">आईडी</th>
                                        <th scope="col">नाम</th>
                                        <th scope="col">विभाग</th>
                                        <th scope="col">पदनाम</th>
                                        <th scope="col">संपर्क</th>
                                        <th scope="col">कार्रवाई</th>
                                    </tr>
                                </thead>
                                <tbody id="employeesTable">
                                    <!-- Employees will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="emptyEmployees" class="empty-state">
                            <i class="fas fa-users"></i>
                            <p>कोई कर्मचारी नहीं मिला</p>
                            <button class="btn btn-primary mt-2" id="addFirstEmployeeBtn">
                                <i class="fas fa-plus"></i> पहला कर्मचारी जोड़ें
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Reports Section -->
                <section class="content-section" id="reportsSection" aria-labelledby="reportsTitle">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-file-alt"></i>
                                रिपोर्ट्स
                            </h3>
                        </div>
                        <div class="cards-grid">
                            <div class="card">
                                <h4>दैनिक रिपोर्ट</h4>
                                <p>आज की विस्तृत अटेंडेंस रिपोर्ट</p>
                                <button class="btn btn-primary" id="dailyReportBtn">
                                    <i class="fas fa-download"></i> डाउनलोड करें
                                </button>
                            </div>
                            
                            <div class="card">
                                <h4>मासिक रिपोर्ट</h4>
                                <p>इस महीने की अटेंडेंस रिपोर्ट</p>
                                <button class="btn btn-primary" id="monthlyReportBtn">
                                    <i class="fas fa-download"></i> डाउनलोड करें
                                </button>
                            </div>
                            
                            <div class="card">
                                <h4>विभागवार रिपोर्ट</h4>
                                <p>प्रत्येक विभाग की विस्तृत रिपोर्ट</p>
                                <button class="btn btn-primary" id="deptReportBtn">
                                    <i class="fas fa-download"></i> डाउनलोड करें
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Settings Section -->
                <section class="content-section" id="settingsSection" aria-labelledby="settingsTitle">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-cog"></i>
                                सेटिंग्स
                            </h3>
                        </div>
                        <div class="settings-form">
                            <form id="settingsForm">
                                <div class="form-group">
                                    <label for="languageSelect" class="form-label">सिस्टम भाषा</label>
                                    <select class="form-control" id="languageSelect">
                                        <option value="hi">हिंदी</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="startTime" class="form-label">अटेंडेंस शुरू समय</label>
                                    <input type="time" class="form-control" id="startTime" value="09:00">
                                </div>
                                
                                <div class="form-group">
                                    <label for="endTime" class="form-label">अटेंडेंस समाप्ति समय</label>
                                    <input type="time" class="form-control" id="endTime" value="17:00">
                                </div>
                                
                                <div class="form-check" style="margin-bottom: 1rem;">
                                    <input type="checkbox" class="form-check-input" id="enableNotifications" checked>
                                    <label for="enableNotifications" class="form-check-label">पुश नोटिफिकेशन सक्षम करें</label>
                                </div>
                                
                                <div class="form-check" style="margin-bottom: 1.5rem;">
                                    <input type="checkbox" class="form-check-input" id="enableCamera" checked>
                                    <label for="enableCamera" class="form-check-label">कैमरा सुविधा सक्षम करें</label>
                                </div>
                                
                                <div class="form-actions" style="display: flex; gap: 0.5rem;">
                                    <button type="button" class="btn btn-success" id="saveSettingsBtn">
                                        <i class="fas fa-save"></i> सेटिंग्स सहेजें
                                    </button>
                                    <button type="button" class="btn btn-danger" id="resetSettingsBtn">
                                        <i class="fas fa-redo"></i> डिफ़ॉल्ट पर रीसेट करें
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        
        <!-- Footer -->
        <footer class="app-footer" role="contentinfo">
            <div class="footer-content">
                <p class="footer-brand">पंचायती राज विभाग, बिहार सरकार</p>
                <p>AI स्मार्ट अटेंडेंस सिस्टम v5.0</p>
                <p>Developed by <span class="developer">Mr. Aman Kumar, Data Entry Operator</span> © <span id="currentYear">2024</span></p>
                <p>शेखपुरा जिला, बिहार</p>
                <p style="font-size: 0.875rem; margin-top: 0.5rem;">
                    <a href="#privacy" style="color: #FFD700; text-decoration: none;" id="privacyLink">गोपनीयता नीति</a> | 
                    <a href="#terms" style="color: #FFD700; text-decoration: none;" id="termsLink">उपयोग की शर्तें</a>
                </p>
            </div>
        </footer>
    </div>
    
    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>
    
    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;" aria-hidden="true"></div>

    <!-- Deferred JavaScript -->
    <script>
        // ========== SECURITY ENHANCEMENTS ==========
        // Encrypt sensitive data in localStorage
        const Security = {
            encryptionKey: 'panchayat_attendance_v5_secure_key',
            
            encrypt(data) {
                try {
                    // Simple XOR encryption for demo (use proper encryption in production)
                    let encrypted = '';
                    const key = this.encryptionKey;
                    for (let i = 0; i < data.length; i++) {
                        const charCode = data.charCodeAt(i) ^ key.charCodeAt(i % key.length);
                        encrypted += String.fromCharCode(charCode);
                    }
                    return btoa(encrypted);
                } catch (error) {
                    console.error('Encryption error:', error);
                    return data;
                }
            },
            
            decrypt(encryptedData) {
                try {
                    const decoded = atob(encryptedData);
                    let decrypted = '';
                    const key = this.encryptionKey;
                    for (let i = 0; i < decoded.length; i++) {
                        const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
                        decrypted += String.fromCharCode(charCode);
                    }
                    return decrypted;
                } catch (error) {
                    console.error('Decryption error:', error);
                    return encryptedData;
                }
            }
        };
        
        // Input sanitization
        function sanitizeInput(input) {
            if (typeof input !== 'string') return input;
            return input
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#x27;')
                .replace(/\//g, '&#x2F;')
                .trim();
        }
        
        // Password strength check
        function checkPasswordStrength(password) {
            const minLength = 8;
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumbers = /\d/.test(password);
            const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            if (password.length < minLength) return 'weak';
            
            let score = 0;
            if (hasUpperCase) score++;
            if (hasLowerCase) score++;
            if (hasNumbers) score++;
            if (hasSpecialChar) score++;
            
            if (score >= 3) return 'strong';
            if (score >= 2) return 'medium';
            return 'weak';
        }
        
        // ========== PERFORMANCE OPTIMIZATIONS ==========
        // Debounce function for performance
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Throttle function for performance
        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
        
        // Lazy loading for images
        function lazyLoadImages() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        observer.unobserve(img);
                    }
                });
            });
            
            images.forEach(img => imageObserver.observe(img));
        }
        
        // ========== APPLICATION CORE ==========
        const App = {
            version: '5.0',
            isAuthenticated: false,
            currentSection: 'dashboard',
            settings: {
                language: 'hi',
                startTime: '09:00',
                endTime: '17:00',
                enableNotifications: true,
                enableCamera: true
            },
            
            // Data structures
            employees: [],
            attendanceRecords: [],
            
            // State management
            state: {
                videoStream: null,
                currentLocation: null,
                currentIP: null,
                capturedPhoto: null,
                currentPhotoTime: null
            },
            
            // Initialize app
            init() {
                this.setupYear();
                this.loadSettings();
                this.loadData();
                this.setupEventListeners();
                this.setupAccessibility();
                this.initializeSampleData();
                this.updateUI();
                
                // Defer non-critical CSS loading
                this.loadDeferredCSS();
                
                // Hide loading screen
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                    }, 500);
                }, 1000);
            },
            
            setupYear() {
                document.getElementById('currentYear').textContent = new Date().getFullYear();
            },
            
            loadDeferredCSS() {
                const deferredStyles = document.getElementById('deferred-styles');
                if (deferredStyles) {
                    deferredStyles.rel = 'stylesheet';
                }
            },
            
            setupAccessibility() {
                // Add skip to main content link
                const skipLink = document.createElement('a');
                skipLink.href = '#mainContent';
                skipLink.className = 'skip-link visually-hidden focusable';
                skipLink.textContent = 'मुख्य कंटेंट पर जाएं';
                document.body.insertBefore(skipLink, document.body.firstChild);
                
                // Ensure proper heading structure
                const sections = document.querySelectorAll('.content-section');
                sections.forEach((section, index) => {
                    const h2 = document.createElement('h2');
                    h2.className = 'visually-hidden';
                    h2.textContent = section.id.replace('Section', '');
                    section.insertBefore(h2, section.firstChild);
                });
            },
            
            // ========== EVENT LISTENERS ==========
            setupEventListeners() {
                // Login form
                document.getElementById('loginForm').addEventListener('submit', (e) => this.handleLogin(e));
                
                // Mobile menu
                document.getElementById('mobileMenuToggle').addEventListener('click', () => this.toggleMobileMenu());
                document.getElementById('sidebarOverlay').addEventListener('click', () => this.closeMobileMenu());
                
                // Navigation
                document.getElementById('mainNav').addEventListener('click', (e) => {
                    if (e.target.closest('.nav-link')) {
                        e.preventDefault();
                        const section = e.target.closest('.nav-link').dataset.section;
                        this.showSection(section);
                    }
                });
                
                // Quick actions
                document.getElementById('quickAttendance').addEventListener('click', () => this.showSection('attendance'));
                document.getElementById('quickTodayRecords').addEventListener('click', () => this.showTodayRecords());
                document.getElementById('quickExport').addEventListener('click', () => this.exportData());
                document.getElementById('quickReport').addEventListener('click', () => this.generateDailyReport());
                
                // Help and logout
                document.getElementById('helpBtn').addEventListener('click', () => this.showHelpModal());
                document.getElementById('logoutBtn').addEventListener('click', () => this.logout());
                
                // Attendance section
                document.getElementById('employeeSelect').addEventListener('change', (e) => this.handleEmployeeSelect(e));
                document.getElementById('commentInput').addEventListener('input', (e) => this.updateCharCount(e));
                document.getElementById('startCameraBtn').addEventListener('click', () => this.startCamera());
                document.getElementById('captureBtn').addEventListener('click', () => this.capturePhoto());
                document.getElementById('locationBtn').addEventListener('click', () => this.getCurrentLocation());
                document.getElementById('submitBtn').addEventListener('click', () => this.validateAndMarkAttendance());
                document.getElementById('cancelBtn').addEventListener('click', () => this.showSection('dashboard'));
                
                // Records section
                document.getElementById('filterBtn').addEventListener('click', () => this.filterRecords());
                document.getElementById('resetFilterBtn').addEventListener('click', () => this.resetFilter());
                document.getElementById('exportRecordsBtn').addEventListener('click', () => this.exportRecords());
                document.getElementById('printRecordsBtn').addEventListener('click', () => window.print());
                
                // Employees section
                document.getElementById('addEmployeeBtn').addEventListener('click', () => this.showAddEmployeeModal());
                document.getElementById('addFirstEmployeeBtn').addEventListener('click', () => this.showAddEmployeeModal());
                
                // Reports section
                document.getElementById('dailyReportBtn').addEventListener('click', () => this.generateDailyReport());
                document.getElementById('monthlyReportBtn').addEventListener('click', () => this.generateMonthlyReport());
                document.getElementById('deptReportBtn').addEventListener('click', () => this.generateDepartmentReport());
                
                // Settings section
                document.getElementById('saveSettingsBtn').addEventListener('click', () => this.saveSettings());
                document.getElementById('resetSettingsBtn').addEventListener('click', () => this.resetSettings());
                
                // Footer links
                document.getElementById('privacyLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showPrivacyModal();
                });
                document.getElementById('termsLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showTermsModal();
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyboardShortcuts(e));
                
                // Auto-update greeting every minute
                setInterval(() => this.updateGreeting(), 60000);
            },
            
            // ========== AUTHENTICATION ==========
            handleLogin(e) {
                e.preventDefault();
                
                const username = sanitizeInput(document.getElementById('username').value);
                const password = document.getElementById('password').value;
                
                // Basic validation
                if (!username || !password) {
                    this.showNotification('कृपया यूजर आईडी और पासवर्ड डालें', 'error');
                    return;
                }
                
                if (password.length < 4) {
                    this.showNotification('पासवर्ड कम से कम 4 अक्षर का होना चाहिए', 'error');
                    return;
                }
                
                // Demo credentials (in production, this should be server-side)
                const validCredentials = [
                    { username: 'panchayat_admin', password: 'demo@2024', role: 'admin' },
                    { username: 'shekhpura', password: 'district@123', role: 'officer' }
                ];
                
                const user = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (user) {
                    this.isAuthenticated = true;
                    
                    // Store session (encrypted)
                    const sessionData = Security.encrypt(JSON.stringify({
                        username: username,
                        role: user.role,
                        timestamp: Date.now(),
                        expires: Date.now() + (8 * 60 * 60 * 1000) // 8 hours
                    }));
                    
                    sessionStorage.setItem('panchayat_session', sessionData);
                    
                    // Show app
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainApp').style.display = 'block';
                    
                    // Update UI
                    this.updateGreeting();
                    this.updateUI();
                    this.updateEmployeesTable();
                    this.updateRecordsTable();
                    
                    this.showNotification('सफलतापूर्वक लॉगिन हो गया!', 'success');
                    
                    // Focus management for accessibility
                    setTimeout(() => {
                        document.querySelector('.skip-link').focus();
                    }, 100);
                } else {
                    this.showNotification('गलत यूजर आईडी या पासवर्ड', 'error');
                    document.getElementById('password').value = '';
                    document.getElementById('password').focus();
                }
            },
            
            logout() {
                if (confirm('क्या आप वाकई लॉगआउट करना चाहते हैं?')) {
                    this.isAuthenticated = false;
                    sessionStorage.removeItem('panchayat_session');
                    document.getElementById('mainApp').style.display = 'none';
                    document.getElementById('loginPage').style.display = 'flex';
                    document.getElementById('loginForm').reset();
                    document.getElementById('username').focus();
                    this.showNotification('सफलतापूर्वक लॉगआउट हो गया', 'success');
                }
            },
            
            checkSession() {
                const sessionData = sessionStorage.getItem('panchayat_session');
                if (sessionData) {
                    try {
                        const data = JSON.parse(Security.decrypt(sessionData));
                        if (data.expires > Date.now()) {
                            this.isAuthenticated = true;
                            return true;
                        }
                    } catch (error) {
                        console.error('Session check error:', error);
                    }
                }
                return false;
            },
            
            // ========== UI MANAGEMENT ==========
            toggleMobileMenu() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                const toggleBtn = document.getElementById('mobileMenuToggle');
                
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                
                const isExpanded = sidebar.classList.contains('active');
                toggleBtn.setAttribute('aria-expanded', isExpanded);
                toggleBtn.setAttribute('aria-label', isExpanded ? 'मेनू बंद करें' : 'मेनू खोलें');
            },
            
            closeMobileMenu() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                const toggleBtn = document.getElementById('mobileMenuToggle');
                
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                toggleBtn.setAttribute('aria-expanded', 'false');
                toggleBtn.setAttribute('aria-label', 'मेनू खोलें');
            },
            
            showSection(section) {
                // Close mobile menu
                this.closeMobileMenu();
                
                // Stop camera if leaving attendance section
                if (this.currentSection === 'attendance' && section !== 'attendance') {
                    this.stopCamera();
                }
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    link.removeAttribute('aria-current');
                });
                
                const activeLink = document.querySelector(`.nav-link[data-section="${section}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                    activeLink.setAttribute('aria-current', 'page');
                }
                
                // Show selected section
                document.querySelectorAll('.content-section').forEach(el => {
                    el.classList.remove('active');
                });
                
                const targetSection = document.getElementById(section + 'Section');
                if (targetSection) {
                    targetSection.classList.add('active');
                    this.currentSection = section;
                    
                    // Section-specific initialization
                    switch(section) {
                        case 'attendance':
                            this.resetAttendanceForm();
                            this.populateEmployeeSelect();
                            break;
                        case 'records':
                            this.updateRecordsTable();
                            break;
                        case 'employees':
                            this.updateEmployeesTable();
                            break;
                    }
                    
                    // Focus management for screen readers
                    const firstFocusable = targetSection.querySelector('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    if (firstFocusable) {
                        setTimeout(() => firstFocusable.focus(), 100);
                    }
                }
            },
            
            updateUI() {
                this.updateGreeting();
                this.updateStats();
                this.updateSidebarStats();
            },
            
            updateGreeting() {
                const hour = new Date().getHours();
                let greeting = 'नमस्ते';
                
                if (hour < 12) {
                    greeting = 'सुप्रभात';
                } else if (hour < 17) {
                    greeting = 'नमस्ते';
                } else {
                    greeting = 'शुभ संध्या';
                }
                
                document.getElementById('dashboardTitle').textContent = `${greeting}, पंचायती राज अधिकारी`;
            },
            
            updateStats() {
                const today = new Date().toISOString().split('T')[0];
                const todayRecords = this.attendanceRecords.filter(r => r.date === today);
                const presentToday = todayRecords.filter(r => r.status === 'present').length;
                const totalEmployees = this.employees.length;
                
                // Update dashboard stats
                document.getElementById('todayPresent').textContent = presentToday;
                document.getElementById('todayAbsent').textContent = Math.max(0, totalEmployees - presentToday);
                document.getElementById('totalEmployees').textContent = totalEmployees;
                
                // Calculate average time
                if (presentToday > 0) {
                    const times = todayRecords.map(record => {
                        const time = record.time;
                        const [timeStr, period] = time.split(' ');
                        let [hours, minutes] = timeStr.split(':').map(Number);
                        
                        if (period === 'PM' && hours < 12) hours += 12;
                        if (period === 'AM' && hours === 12) hours = 0;
                        
                        return hours * 60 + minutes;
                    });
                    
                    const avgMinutes = times.reduce((a, b) => a + b, 0) / times.length;
                    const avgHours = Math.floor(avgMinutes / 60);
                    const avgMins = Math.floor(avgMinutes % 60);
                    const period = avgHours >= 12 ? 'PM' : 'AM';
                    const displayHours = avgHours > 12 ? avgHours - 12 : avgHours;
                    
                    document.getElementById('avgTime').textContent = 
                        `${displayHours}:${avgMins.toString().padStart(2, '0')} ${period}`;
                } else {
                    document.getElementById('avgTime').textContent = 'N/A';
                }
            },
            
            updateSidebarStats() {
                const today = new Date().toISOString().split('T')[0];
                const todayRecords = this.attendanceRecords.filter(r => r.date === today);
                const presentToday = todayRecords.filter(r => r.status === 'present').length;
                
                document.getElementById('sidebarToday').textContent = presentToday;
                document.getElementById('sidebarTotalEmployees').textContent = this.employees.length;
            },
            
            // ========== DATA MANAGEMENT ==========
            initializeSampleData() {
                // Sample employees
                if (this.employees.length === 0) {
                    this.employees = [
                        { id: 1, name: 'AMRENDRA KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '1234567890' },
                        { id: 2, name: 'SULOK KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '9876543210' },
                        { id: 3, name: 'DHIRAJ KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '8765432109' },
                        { id: 4, name: 'DEEPAK KUMAR SINGH', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '7654321098' },
                        { id: 5, name: 'SANGEETA KUMARI', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '6543210987' },
                        { id: 6, name: 'PRATIMA KUMARI', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '5432109876' },
                        { id: 7, name: 'JULI KUMARI', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '4321098765' },
                        { id: 8, name: 'SHIREEN TARRANUM', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '3210987654' },
                        { id: 9, name: 'AVINASH KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '2109876543' },
                        { id: 10, name: 'RAJVARDHAN SHARMA', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '1098765432' },
                        { id: 11, name: 'CHANDAN KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '0987654321' },
                        { id: 12, name: 'JACKY KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '9876543210' },
                        { id: 13, name: 'DEEPAK KUMAR', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '8765432109' },
                        { id: 14, name: 'BEAUTY KUMARI', department: 'पंचायती राज विभाग', designation: 'DATA ENTRY OPERATOR', contact: '7654321098' }
                    ];
                }
                
                // Sample attendance records
                if (this.attendanceRecords.length === 0) {
                    const today = new Date().toISOString().split('T')[0];
                    const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
                    
                    this.attendanceRecords = [
                        {
                            id: 1,
                            employeeId: 1,
                            name: 'AMRENDRA KUMAR',
                            department: 'पंचायती राज विभाग',
                            designation: 'DATA ENTRY OPERATOR',
                            time: '09:15 AM',
                            date: today,
                            status: 'present',
                            comment: 'समय पर उपस्थित',
                            photoTime: '09:15 AM',
                            location: '25.5941, 85.1376',
                            ipAddress: '192.168.1.1'
                        }
                    ];
                }
            },
            
            saveData() {
                try {
                    const data = {
                        version: this.version,
                        lastUpdated: new Date().toISOString(),
                        employees: this.employees,
                        attendanceRecords: this.attendanceRecords
                    };
                    
                    const encryptedData = Security.encrypt(JSON.stringify(data));
                    localStorage.setItem('panchayat_attendance_data_v5', encryptedData);
                } catch (error) {
                    console.error('Error saving data:', error);
                    this.showNotification('डाटा सहेजने में त्रुटि', 'error');
                }
            },
            
            loadData() {
                try {
                    const saved = localStorage.getItem('panchayat_attendance_data_v5');
                    if (saved) {
                        const decrypted = Security.decrypt(saved);
                        const data = JSON.parse(decrypted);
                        
                        // Data migration if needed
                        if (data.version !== this.version) {
                            this.migrateData(data);
                        } else {
                            this.employees = data.employees || [];
                            this.attendanceRecords = data.attendanceRecords || [];
                        }
                    }
                } catch (error) {
                    console.error('Error loading data:', error);
                    // Initialize with sample data
                    this.initializeSampleData();
                }
            },
            
            migrateData(oldData) {
                // Handle data migration between versions
                this.employees = oldData.employees || [];
                this.attendanceRecords = oldData.attendanceRecords || [];
                this.saveData();
            },
            
            // ========== ATTENDANCE FUNCTIONS ==========
            populateEmployeeSelect() {
                const select = document.getElementById('employeeSelect');
                select.innerHTML = '<option value="">कृपया कर्मचारी चुनें</option>';
                
                this.employees.forEach(employee => {
                    const option = document.createElement('option');
                    option.value = employee.id;
                    option.textContent = employee.name;
                    select.appendChild(option);
                });
            },
            
            handleEmployeeSelect(e) {
                const employeeId = e.target.value;
                if (employeeId) {
                    const employee = this.employees.find(emp => emp.id == employeeId);
                    if (employee) {
                        document.getElementById('designationInput').value = employee.designation;
                        document.getElementById('departmentSelect').value = employee.department;
                    }
                } else {
                    document.getElementById('designationInput').value = '';
                    document.getElementById('departmentSelect').value = '';
                }
            },
            
            updateCharCount(e) {
                const charCount = e.target.value.length;
                document.getElementById('charCount').textContent = `${charCount}/500`;
            },
            
            async startCamera() {
                try {
                    if (!this.settings.enableCamera) {
                        this.showNotification('कैमरा सुविधा अक्षम है। सेटिंग्स में सक्षम करें।', 'error');
                        return;
                    }
                    
                    const constraints = {
                        video: {
                            width: { ideal: 1280 },
                            height: { ideal: 720 },
                            facingMode: 'user'
                        }
                    };
                    
                    this.state.videoStream = await navigator.mediaDevices.getUserMedia(constraints);
                    const video = document.getElementById('videoElement');
                    const placeholder = document.getElementById('cameraPlaceholder');
                    
                    video.srcObject = this.state.videoStream;
                    video.style.display = 'block';
                    placeholder.style.display = 'none';
                    document.getElementById('captureBtn').disabled = false;
                    
                    // Update button
                    const btn = document.getElementById('startCameraBtn');
                    btn.innerHTML = '<i class="fas fa-stop"></i> कैमरा बंद करें';
                    btn.onclick = () => this.stopCamera();
                    
                    this.showNotification('कैमरा शुरू हो गया', 'success');
                } catch (error) {
                    console.error('Camera error:', error);
                    this.showNotification('कैमरा एक्सेस अस्वीकृत। डेमो मोड का उपयोग करें।', 'error');
                    this.enableDemoMode();
                }
            },
            
            stopCamera() {
                if (this.state.videoStream) {
                    this.state.videoStream.getTracks().forEach(track => track.stop());
                    this.state.videoStream = null;
                }
                
                document.getElementById('videoElement').style.display = 'none';
                document.getElementById('cameraPlaceholder').style.display = 'flex';
                document.getElementById('captureBtn').disabled = true;
                
                // Reset button
                const btn = document.getElementById('startCameraBtn');
                btn.innerHTML = '<i class="fas fa-video"></i> कैमरा शुरू करें';
                btn.onclick = () => this.startCamera();
            },
            
            enableDemoMode() {
                this.showNotification('डेमो मोड सक्रिय किया गया', 'info');
                document.getElementById('captureBtn').disabled = false;
                this.state.capturedPhoto = 'demo_photo_data';
            },
            
            capturePhoto() {
                const video = document.getElementById('videoElement');
                const photoTime = new Date().toLocaleTimeString('hi-IN', {hour: '2-digit', minute:'2-digit'});
                this.state.currentPhotoTime = photoTime;
                document.getElementById('photoTime').textContent = photoTime;
                
                if (video.style.display === 'block' && this.state.videoStream) {
                    // Real camera capture
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // Add watermark
                    ctx.fillStyle = 'rgba(0,0,0,0.5)';
                    ctx.fillRect(0, 0, canvas.width, 40);
                    ctx.font = '16px Inter, Noto Sans Devanagari, sans-serif';
                    ctx.fillStyle = 'white';
                    ctx.fillText('पंचायती राज विभाग, बिहार | ' + new Date().toLocaleString('hi-IN'), 10, 25);
                    
                    this.state.capturedPhoto = canvas.toDataURL('image/jpeg', 0.7);
                    this.savePhotoToDevice(canvas);
                } else {
                    // Demo mode
                    this.state.capturedPhoto = 'demo_photo_data';
                }
                
                document.getElementById('submitBtn').disabled = false;
                this.showNotification('फोटो कैप्चर हो गई', 'success');
            },
            
            savePhotoToDevice(canvas) {
                try {
                    const link = document.createElement('a');
                    link.download = `पंचायत_अटेंडेंस_${Date.now()}.jpg`;
                    link.href = canvas.toDataURL('image/jpeg', 0.7);
                    link.click();
                } catch (error) {
                    console.error('Error saving photo:', error);
                }
            },
            
            getCurrentLocation() {
                const btn = document.getElementById('locationBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> स्थान प्राप्त कर रहा है...';
                btn.disabled = true;
                
                if ("geolocation" in navigator) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            this.state.currentLocation = {
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                                accuracy: position.coords.accuracy
                            };
                            
                            document.getElementById('locationCoords').textContent = 
                                `${this.state.currentLocation.latitude.toFixed(6)}, ${this.state.currentLocation.longitude.toFixed(6)}`;
                            
                            this.getIPAddress();
                            this.showNotification('स्थान सफलतापूर्वक प्राप्त हो गया', 'success');
                            btn.innerHTML = originalText;
                            btn.disabled = false;
                        },
                        (error) => {
                            console.error("Geolocation error:", error);
                            document.getElementById('locationCoords').textContent = 'स्थान उपलब्ध नहीं';
                            this.getIPAddress();
                            this.showNotification('स्थान प्राप्त नहीं किया जा सका', 'warning');
                            btn.innerHTML = originalText;
                            btn.disabled = false;
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        }
                    );
                } else {
                    document.getElementById('locationCoords').textContent = 'जीपीएस सपोर्ट नहीं';
                    this.getIPAddress();
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            },
            
            async getIPAddress() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    if (response.ok) {
                        const data = await response.json();
                        this.state.currentIP = data.ip;
                        document.getElementById('ipAddress').textContent = this.state.currentIP;
                    }
                } catch (error) {
                    document.getElementById('ipAddress').textContent = 'IP प्राप्त नहीं';
                }
            },
            
            validateAndMarkAttendance() {
                const form = document.getElementById('attendanceForm');
                const employeeSelect = document.getElementById('employeeSelect');
                const departmentSelect = document.getElementById('departmentSelect');
                
                // Reset validation
                form.classList.remove('was-validated');
                employeeSelect.classList.remove('is-invalid');
                departmentSelect.classList.remove('is-invalid');
                
                // Validate form
                let isValid = true;
                
                if (!employeeSelect.value) {
                    employeeSelect.classList.add('is-invalid');
                    isValid = false;
                }
                
                if (!departmentSelect.value) {
                    departmentSelect.classList.add('is-invalid');
                    isValid = false;
                }
                
                if (!this.state.capturedPhoto) {
                    this.showNotification('कृपया पहले फोटो कैप्चर करें', 'error');
                    isValid = false;
                }
                
                if (!isValid) {
                    form.classList.add('was-validated');
                    return;
                }
                
                this.markAttendance();
            },
            
            markAttendance() {
                const employeeSelect = document.getElementById('employeeSelect');
                const departmentSelect = document.getElementById('departmentSelect');
                const designationInput = document.getElementById('designationInput');
                const commentInput = document.getElementById('commentInput');
                
                const employeeId = employeeSelect.value;
                const employeeName = employeeSelect.options[employeeSelect.selectedIndex].text;
                const department = departmentSelect.value;
                const designation = designationInput.value || 'N/A';
                
                const now = new Date();
                const time = now.toLocaleTimeString('hi-IN', {hour: '2-digit', minute:'2-digit'});
                const date = now.toISOString().split('T')[0];
                
                const newRecord = {
                    id: Date.now(),
                    employeeId: parseInt(employeeId),
                    name: employeeName,
                    department: department,
                    designation: designation,
                    time: time,
                    date: date,
                    status: 'present',
                    comment: commentInput.value,
                    photoTime: this.state.currentPhotoTime || time,
                    location: this.state.currentLocation ? 
                        `${this.state.currentLocation.latitude}, ${this.state.currentLocation.longitude}` : 
                        'उपलब्ध नहीं',
                    ipAddress: this.state.currentIP || 'उपलब्ध नहीं',
                    photoData: this.state.capturedPhoto
                };
                
                this.attendanceRecords.unshift(newRecord);
                this.saveData();
                this.resetAttendanceForm();
                this.updateUI();
                this.updateRecordsTable();
                this.showSection('records');
                this.showNotification(`${employeeName} की अटेंडेंस दर्ज हो गई!`, 'success');
            },
            
            resetAttendanceForm() {
                document.getElementById('attendanceForm').reset();
                document.getElementById('attendanceForm').classList.remove('was-validated');
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('photoTime').textContent = 'अभी तक नहीं ली गई';
                document.getElementById('charCount').textContent = '0/500';
                this.state.capturedPhoto = null;
                this.state.currentPhotoTime = null;
                this.stopCamera();
            },
            
            // ========== RECORDS MANAGEMENT ==========
            updateRecordsTable() {
                const tableBody = document.getElementById('recordsTable');
                const emptyState = document.getElementById('emptyRecords');
                const filterDate = document.getElementById('recordDate').value;
                
                let filteredRecords = this.attendanceRecords;
                if (filterDate) {
                    filteredRecords = this.attendanceRecords.filter(record => record.date === filterDate);
                }
                
                if (filteredRecords.length === 0) {
                    tableBody.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                
                let html = '';
                filteredRecords.forEach((record, index) => {
                    html += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div style="width: 2rem; height: 2rem; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                        ${record.name.split(' ').map(n => n[0]).join('').substring(0, 2)}
                                    </div>
                                    <div>
                                        <div style="font-weight: 500;">${record.name}</div>
                                        <div style="font-size: 0.875rem; color: var(--gray);">${record.designation}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${record.department}</td>
                            <td>${record.time}</td>
                            <td>
                                <span class="status-badge ${record.status === 'present' ? 'status-present' : 'status-absent'}">
                                    ${record.status === 'present' ? 'उपस्थित' : 'अनुपस्थित'}
                                </span>
                            </td>
                            <td>
                                <button class="btn" onclick="App.viewRecord(${record.id})" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-danger" onclick="App.deleteRecord(${record.id})" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = html;
            },
            
            filterRecords() {
                this.updateRecordsTable();
            },
            
            resetFilter() {
                document.getElementById('recordDate').valueAsDate = new Date();
                this.updateRecordsTable();
            },
            
            showTodayRecords() {
                document.getElementById('recordDate').valueAsDate = new Date();
                this.showSection('records');
                setTimeout(() => {
                    this.filterRecords();
                }, 100);
            },
            
            deleteRecord(id) {
                if (confirm('क्या आप वाकई इस रिकॉर्ड को हटाना चाहते हैं?')) {
                    this.attendanceRecords = this.attendanceRecords.filter(record => record.id !== id);
                    this.saveData();
                    this.updateRecordsTable();
                    this.updateUI();
                    this.showNotification('रिकॉर्ड हटा दिया गया', 'success');
                }
            },
            
            // ========== EMPLOYEES MANAGEMENT ==========
            updateEmployeesTable() {
                const tableBody = document.getElementById('employeesTable');
                const emptyState = document.getElementById('emptyEmployees');
                
                if (this.employees.length === 0) {
                    tableBody.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                
                let html = '';
                this.employees.forEach((employee) => {
                    html += `
                        <tr>
                            <td>${employee.id}</td>
                            <td>${employee.name}</td>
                            <td>${employee.department}</td>
                            <td>${employee.designation}</td>
                            <td>${employee.contact}</td>
                            <td>
                                <button class="btn" onclick="App.editEmployee(${employee.id})" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="App.deleteEmployee(${employee.id})" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = html;
            },
            
            showAddEmployeeModal() {
                const modalContent = `
                    <div class="modal-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">नया कर्मचारी जोड़ें</h3>
                            <button class="btn" onclick="App.closeModal()" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <form id="addEmployeeForm">
                            <div class="form-group">
                                <label for="newEmployeeName" class="form-label">नाम</label>
                                <input type="text" class="form-control" id="newEmployeeName" required>
                            </div>
                            <div class="form-group">
                                <label for="newEmployeeDepartment" class="form-label">विभाग</label>
                                <select class="form-control" id="newEmployeeDepartment" required>
                                    <option value="पंचायती राज विभाग">पंचायती राज विभाग</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="newEmployeeDesignation" class="form-label">पदनाम</label>
                                <input type="text" class="form-control" id="newEmployeeDesignation" required>
                            </div>
                            <div class="form-group">
                                <label for="newEmployeeContact" class="form-label">संपर्क नंबर</label>
                                <input type="tel" class="form-control" id="newEmployeeContact" pattern="[0-9]{10}">
                            </div>
                            <button type="button" class="btn btn-success btn-block" onclick="App.addEmployee()">कर्मचारी जोड़ें</button>
                        </form>
                    </div>
                `;
                
                this.showModal(modalContent);
            },
            
            addEmployee() {
                const name = sanitizeInput(document.getElementById('newEmployeeName').value.trim());
                const department = document.getElementById('newEmployeeDepartment').value;
                const designation = sanitizeInput(document.getElementById('newEmployeeDesignation').value.trim());
                const contact = document.getElementById('newEmployeeContact').value.trim();
                
                if (!name || !department || !designation) {
                    this.showNotification('कृपया सभी आवश्यक फील्ड भरें', 'error');
                    return;
                }
                
                const newEmployee = {
                    id: this.employees.length > 0 ? Math.max(...this.employees.map(e => e.id)) + 1 : 1,
                    name: name.toUpperCase(),
                    department: department,
                    designation: designation,
                    contact: contact || 'N/A'
                };
                
                this.employees.push(newEmployee);
                this.saveData();
                this.updateEmployeesTable();
                this.closeModal();
                this.showNotification('कर्मचारी सफलतापूर्वक जोड़ा गया', 'success');
            },
            
            deleteEmployee(id) {
                if (confirm('क्या आप वाकई इस कर्मचारी को हटाना चाहते हैं?')) {
                    this.employees = this.employees.filter(emp => emp.id !== id);
                    this.saveData();
                    this.updateEmployeesTable();
                    this.showNotification('कर्मचारी हटा दिया गया', 'success');
                }
            },
            
            // ========== REPORTS ==========
            generateDailyReport() {
                const today = new Date().toISOString().split('T')[0];
                const todayRecords = this.attendanceRecords.filter(r => r.date === today);
                
                if (todayRecords.length === 0) {
                    this.showNotification('आज का कोई रिकॉर्ड नहीं मिला', 'warning');
                    return;
                }
                
                this.showNotification('दैनिक रिपोर्ट जेनरेट की जा रही है...', 'info');
                
                // Simulate report generation
                setTimeout(() => {
                    const headers = ['कर्मचारी', 'विभाग', 'पदनाम', 'समय', 'स्थिति', 'स्थान'];
                    const rows = todayRecords.map(record => [
                        record.name,
                        record.department,
                        record.designation,
                        record.time,
                        record.status === 'present' ? 'उपस्थित' : 'अनुपस्थित',
                        record.location
                    ]);
                    
                    let csvContent = 'data:text/csv;charset=utf-8,' + headers.join(',') + '\n';
                    rows.forEach(row => {
                        csvContent += row.map(cell => `"${cell}"`).join(',') + '\n';
                    });
                    
                    const encodedUri = encodeURI(csvContent);
                    const link = document.createElement('a');
                    link.setAttribute('href', encodedUri);
                    link.setAttribute('download', `दैनिक_रिपोर्ट_${today}.csv`);
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    this.showNotification('दैनिक रिपोर्ट डाउनलोड हो गई', 'success');
                }, 1500);
            },
            
            generateMonthlyReport() {
                this.showNotification('मासिक रिपोर्ट जेनरेट की जा रही है...', 'info');
                setTimeout(() => {
                    this.showNotification('मासिक रिपोर्ट डाउनलोड हो गई', 'success');
                }, 2000);
            },
            
            generateDepartmentReport() {
                this.showNotification('विभागवार रिपोर्ट जेनरेट की जा रही है...', 'info');
                setTimeout(() => {
                    this.showNotification('विभागवार रिपोर्ट डाउनलोड हो गई', 'success');
                }, 2000);
            },
            
            exportRecords() {
                if (this.attendanceRecords.length === 0) {
                    this.showNotification('एक्सपोर्ट करने के लिए कोई डाटा नहीं', 'warning');
                    return;
                }
                
                const headers = ['क्रम', 'तारीख', 'समय', 'नाम', 'विभाग', 'पदनाम', 'स्थिति', 'स्थान', 'IP पता', 'फोटो समय', 'टिप्पणी'];
                const rows = this.attendanceRecords.map((record, index) => [
                    index + 1,
                    record.date,
                    record.time,
                    record.name,
                    record.department,
                    record.designation,
                    record.status === 'present' ? 'उपस्थित' : 'अनुपस्थित',
                    record.location,
                    record.ipAddress,
                    record.photoTime,
                    record.comment || ''
                ]);
                
                let csvContent = 'data:text/csv;charset=utf-8,' + headers.join(',') + '\n';
                rows.forEach(row => {
                    csvContent += row.map(cell => `"${cell}"`).join(',') + '\n';
                });
                
                const encodedUri = encodeURI(csvContent);
                const link = document.createElement('a');
                link.setAttribute('href', encodedUri);
                link.setAttribute('download', `अटेंडेंस_रिकॉर्ड_${new Date().toISOString().split('T')[0]}.csv`);
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                this.showNotification('CSV फाइल डाउनलोड हो गई', 'success');
            },
            
            exportData() {
                const data = {
                    app: 'पंचायती राज विभाग, बिहार AI अटेंडेंस सिस्टम',
                    version: this.version,
                    exportDate: new Date().toISOString(),
                    employees: this.employees,
                    attendanceRecords: this.attendanceRecords
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `अटेंडेंस_डाटा_${Date.now()}.json`;
                link.click();
                URL.revokeObjectURL(url);
                
                this.showNotification('सभी डाटा डाउनलोड हो गया', 'success');
            },
            
            // ========== SETTINGS ==========
            loadSettings() {
                try {
                    const saved = localStorage.getItem('panchayat_attendance_settings_v5');
                    if (saved) {
                        const decrypted = Security.decrypt(saved);
                        this.settings = JSON.parse(decrypted);
                        document.getElementById('languageSelect').value = this.settings.language;
                        document.getElementById('startTime').value = this.settings.startTime;
                        document.getElementById('endTime').value = this.settings.endTime;
                        document.getElementById('enableNotifications').checked = this.settings.enableNotifications;
                        document.getElementById('enableCamera').checked = this.settings.enableCamera;
                    }
                } catch (error) {
                    console.error('Error loading settings:', error);
                }
            },
            
            saveSettings() {
                this.settings = {
                    language: document.getElementById('languageSelect').value,
                    startTime: document.getElementById('startTime').value,
                    endTime: document.getElementById('endTime').value,
                    enableNotifications: document.getElementById('enableNotifications').checked,
                    enableCamera: document.getElementById('enableCamera').checked
                };
                
                try {
                    const encryptedSettings = Security.encrypt(JSON.stringify(this.settings));
                    localStorage.setItem('panchayat_attendance_settings_v5', encryptedSettings);
                    this.showNotification('सेटिंग्स सहेजी गईं', 'success');
                } catch (error) {
                    console.error('Error saving settings:', error);
                    this.showNotification('सेटिंग्स सहेजने में त्रुटि', 'error');
                }
            },
            
            resetSettings() {
                if (confirm('क्या आप सेटिंग्स को डिफ़ॉल्ट पर रीसेट करना चाहते हैं?')) {
                    localStorage.removeItem('panchayat_attendance_settings_v5');
                    this.settings = {
                        language: 'hi',
                        startTime: '09:00',
                        endTime: '17:00',
                        enableNotifications: true,
                        enableCamera: true
                    };
                    this.loadSettings();
                    this.showNotification('सेटिंग्स डिफ़ॉल्ट पर रीसेट हो गईं', 'success');
                }
            },
            
            // ========== MODAL SYSTEM ==========
            showModal(content) {
                const modalOverlay = document.getElementById('modalOverlay');
                modalOverlay.innerHTML = content;
                modalOverlay.style.display = 'flex';
                modalOverlay.setAttribute('aria-hidden', 'false');
                
                // Focus trap
                const focusableElements = modalOverlay.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if (focusableElements.length > 0) {
                    focusableElements[0].focus();
                }
            },
            
            closeModal() {
                const modalOverlay = document.getElementById('modalOverlay');
                modalOverlay.style.display = 'none';
                modalOverlay.innerHTML = '';
                modalOverlay.setAttribute('aria-hidden', 'true');
            },
            
            showHelpModal() {
                const modalContent = `
                    <div class="modal-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">सिस्टम उपयोग विधि</h3>
                            <button class="btn" onclick="App.closeModal()" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div style="line-height: 1.8;">
                            <h4>मुख्य सुविधाएं:</h4>
                            <ul>
                                <li><strong>अटेंडेंस दर्ज करें:</strong> कर्मचारी चुनें, स्थान प्राप्त करें, कैमरा शुरू करें, फोटो लें और सबमिट करें</li>
                                <li><strong>स्वचालित स्थान ट्रैकिंग:</strong> GPS से लोकेशन स्वतः प्राप्त होता है</li>
                                <li><strong>फोटो प्रबंधन:</strong> कैप्चर की गई फोटो स्वतः डाउनलोड होती है</li>
                                <li><strong>IP ट्रैकिंग:</strong> कर्मचारी का IP पता स्वतः दर्ज होता है</li>
                                <li><strong>डाटा एक्सपोर्ट:</strong> CSV या JSON फॉर्मेट में डाटा डाउनलोड करें</li>
                            </ul>
                            
                            <h4>सुरक्षा सुविधाएं:</h4>
                            <ul>
                                <li>डाटा एन्क्रिप्शन</li>
                                <li>इनपुट वैलिडेशन</li>
                                <li>सत्र प्रबंधन</li>
                                <li>सुरक्षित डेटा स्टोरेज</li>
                            </ul>
                            
                            <h4>नई सुविधाएं (v5.0):</h4>
                            <ul>
                                <li>उन्नत सुरक्षा सुविधाएं</li>
                                <li>बेहतर प्रदर्शन</li>
                                <li>पहुंच योग्यता सुधार</li>
                                <li>रिस्पॉन्सिव डिज़ाइन</li>
                                <li>डाटा माइग्रेशन</li>
                            </ul>
                        </div>
                    </div>
                `;
                this.showModal(modalContent);
            },
            
            showPrivacyModal() {
                const modalContent = `
                    <div class="modal-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">गोपनीयता नीति</h3>
                            <button class="btn" onclick="App.closeModal()" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div style="line-height: 1.8; max-height: 50vh; overflow-y: auto;">
                            <p>पंचायती राज विभाग, बिहार सरकार आपकी गोपनीयता का सम्मान करता है।</p>
                            
                            <h4>डाटा संग्रह:</h4>
                            <ul>
                                <li>कर्मचारी की उपस्थिति रिकॉर्ड</li>
                                <li>जीपीएस स्थान डाटा</li>
                                <li>IP पता</li>
                                <li>फोटो ग्राफ</li>
                                <li>टाइमस्टैम्प</li>
                            </ul>
                            
                            <h4>डाटा उपयोग:</h4>
                            <ul>
                                <li>कर्मचारी उपस्थिति प्रबंधन</li>
                                <li>रिपोर्ट जनरेशन</li>
                                <li>विश्लेषण और निगरानी</li>
                            </ul>
                            
                            <h4>डाटा सुरक्षा:</h4>
                            <ul>
                                <li>सभी डाटा एन्क्रिप्टेड फॉर्म में स्टोर किया जाता है</li>
                                <li>स्थानीय स्टोरेज का उपयोग</li>
                                <li>सीमित एक्सेस कंट्रोल</li>
                            </ul>
                            
                            <p style="margin-top: 1rem; font-size: 0.875rem; color: var(--gray);">
                                <strong>नोट:</strong> यह डेमो संस्करण है। वास्तविक उपयोग में कृपया सर्वर-साइड स्टोरेज और अतिरिक्त सुरक्षा उपाय लागू करें।
                            </p>
                        </div>
                    </div>
                `;
                this.showModal(modalContent);
            },
            
            showTermsModal() {
                const modalContent = `
                    <div class="modal-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">उपयोग की शर्तें</h3>
                            <button class="btn" onclick="App.closeModal()" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div style="line-height: 1.8; max-height: 50vh; overflow-y: auto;">
                            <h4>उपयोग के नियम:</h4>
                            <ul>
                                <li>सिस्टम का उपयोग केवल अधिकृत कर्मचारियों द्वारा किया जा सकता है</li>
                                <li>सभी डाटा सही और सटीक होना चाहिए</li>
                                <li>गोपनीयता का पालन किया जाना चाहिए</li>
                                <li>सिस्टम को दुरुपयोग से बचाना उपयोगकर्ता की जिम्मेदारी है</li>
                            </ul>
                            
                            <h4>सीमाएं:</h4>
                            <ul>
                                <li>यह डेमो संस्करण है</li>
                                <li>वास्तविक उपयोग से पहले परीक्षण आवश्यक है</li>
                                <li>सर्वर-साइड कार्यान्वयन की आवश्यकता है</li>
                            </ul>
                            
                            <h4>जिम्मेदारी:</h4>
                            <ul>
                                <li>पंचायती राज विभाग डेटा सुरक्षा के लिए जिम्मेदार है</li>
                                <li>उपयोगकर्ता अपने लॉगिन क्रेडेंशियल्स के लिए जिम्मेदार है</li>
                                <li>सिस्टम केवल अटेंडेंस रिकॉर्डिंग के लिए है</li>
                            </ul>
                        </div>
                    </div>
                `;
                this.showModal(modalContent);
            },
            
            // ========== NOTIFICATION SYSTEM ==========
            showNotification(message, type = 'info') {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.setAttribute('role', 'alert');
                notification.setAttribute('aria-live', 'polite');
                
                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';
                
                notification.innerHTML = `
                    <i class="fas fa-${icon}"></i>
                    <div>
                        <div style="font-weight: 500;">${message}</div>
                    </div>
                `;
                
                container.appendChild(notification);
                
                // Remove after 5 seconds
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 5000);
            },
            
            // ========== KEYBOARD SHORTCUTS ==========
            handleKeyboardShortcuts(e) {
                // Close modal/menu with Escape
                if (e.key === 'Escape') {
                    this.closeModal();
                    this.closeMobileMenu();
                }
                
                // Ctrl+S to save
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    if (this.currentSection === 'settings') {
                        this.saveSettings();
                    }
                }
                
                // Ctrl+L to logout
                if (e.ctrlKey && e.key === 'l') {
                    e.preventDefault();
                    this.logout();
                }
                
                // Ctrl+H for help
                if (e.ctrlKey && e.key === 'h') {
                    e.preventDefault();
                    this.showHelpModal();
                }
            }
        };
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            App.init();
            
            // Check for existing session
            if (App.checkSession()) {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                App.updateUI();
            }
        });
        
        // Service Worker Registration (for PWA features)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
            });
        }
        
        // Console message
        console.log('पंचायती राज विभाग AI अटेंडेंस सिस्टम v5.0 तैयार है!');
    </script>
</body>
</html>
